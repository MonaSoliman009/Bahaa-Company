!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/cdk/overlay"),require("@angular/forms"),require("rxjs/operators"),require("@angular/cdk/a11y"),require("@angular/cdk/keycodes"),require("@angular/common")):"function"==typeof define&&define.amd?define("@iomechs/angular-tags-input",["exports","@angular/core","@angular/cdk/overlay","@angular/forms","rxjs/operators","@angular/cdk/a11y","@angular/cdk/keycodes","@angular/common"],e):e(((t=t||self).iomechs=t.iomechs||{},t.iomechs["angular-tags-input"]={}),t.ng.core,t.ng.cdk.overlay,t.ng.forms,t.rxjs.operators,t.ng.cdk.a11y,t.ng.cdk.keycodes,t.ng.common)}(this,(function(t,e,n,i,o,r,a,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var d=function(){return(d=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function l(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var u=function(){function t(){}return t.prototype.transform=function(t,e){var n=this,i=[],o=e.tagsAdded,r=e.config;if(!t)return[];if(r.showTagsSelectedInDD&&(t=this.setSelectedTags(t,r,o)),!r.hideAddedTags)return t;for(var a=0,s=t.length;a<s;++a){var l=d({},t[a]);this.isTagAlreadySelected(l,o,r)||(l.tiSelected=!1,r.nestedTagProperty&&l[r.nestedTagProperty]&&(l[r.nestedTagProperty]=l[r.nestedTagProperty].filter((function(t){return!n.isTagAlreadySelected(t,o,r)}))),i.push(l))}return i},t.prototype.isTagAlreadySelected=function(t,e,n){var i=this;return e.find((function(e){return!!i.areTagsMatching(t,e,n)||!!e[n.nestedTagProperty]&&i.isTagAlreadySelected(t,e[n.nestedTagProperty],n)}))},t.prototype.areTagsMatching=function(t,e,n){return"number"==typeof e[n.identifier]?e[n.identifier]===+t[n.identifier]:"string"==typeof e[n.identifier]&&"string"==typeof t[n.identifier]?e[n.identifier].toLowerCase()===t[n.identifier].toLowerCase():void 0},t.prototype.setSelectedTags=function(t,e,n,i){var o=this;return void 0===i&&(i=null),t.map((function(t){return t.tiSelected=!!o.isTagAlreadySelected(t,n,e),e.showTagsSelectedInDD&&i&&(t.tiSelected=!0),t[e.nestedTagProperty]&&t[e.nestedTagProperty].length&&(t[e.nestedTagProperty]=o.setSelectedTags(t[e.nestedTagProperty],e,n,t.tiSelected)),t}))},t=l([e.Pipe({name:"unAddedTags"})],t)}(),c=function(){function t(){this.debugMode=!1}return t.prototype.findTagById=function(t,e,n){for(var i=0,o=t.length;i<o;++i){if(t[i][n.identifier]==e)return t[i];if(t[i][n.nestedTagProperty]){var r=this.findTagById(t[i][n.nestedTagProperty],e,n);if(r)return r}}},t.prototype.setDebugMode=function(t){this.debugMode=t},t.prototype.log=function(t,e){void 0===e&&(e=""),this.debugMode&&console.log(e,t)},t.prototype.findParent=function(t,e,n){for(var i=0,o=t.length;i<o;++i){if(t[i][n.identifier]==e[n.identifier])return t[i];if(t[i][n.nestedTagProperty]){var r=this.findParent(t[i][n.nestedTagProperty],e,n);if(r)return r}}},t.prototype.getMainTagAfterAdding=function(t,e,n,i){if(e[i.nestedTagParentProp]){var o=this.findTagById(t,e[i.nestedTagParentProp],i);if(!o)return;var r=o[i.nestedTagProperty].length,a=o[i.nestedTagProperty].filter((function(t){return!!t.tiSelected})).length;if(r>0&&a>0&&a===r)return o.tiSelected=!0,o[i.nestedTagParentProp]?this.getMainTagAfterAdding(t,o,n,i):o}return e},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t=l([e.Injectable({providedIn:"root"})],t)}(),h=function(){function t(){this.inputClass="default",this.disabled=!1,this.valueChanged=new e.EventEmitter,this.inputFocused=new e.EventEmitter,this.inputBlurred=new e.EventEmitter,this.tagEntered=new e.EventEmitter,this.tagInputForm=new i.FormGroup({tagInputVal:new i.FormControl("")})}return t.prototype.ngOnInit=function(){var t=this;this.tagInputForm.get("tagInputVal").valueChanges.pipe(o.debounceTime(400),o.distinctUntilChanged()).subscribe((function(e){t.lastValueEmitted=e,t.valueChanged.emit(e)}))},t.prototype.ngOnChanges=function(t){void 0!==t.disabled&&(!0===t.disabled.currentValue?this.tagInputForm.get("tagInputVal").disable():this.tagInputForm.get("tagInputVal").enable())},t.prototype.emitInputFocused=function(){if(!this.disabled){var t=this.tagInputForm.get("tagInputVal").value;this.inputFocused.emit(t),this.lastValueEmitted!==t&&(this.valueChanged.emit(t),this.lastValueEmitted=t)}},t.prototype.onEnterKeyPress=function(){var t;if(!this.config.onlyFromAutoComplete){var e=this.inputEl.nativeElement.value;this.tagEntered.emit(((t={})[this.config.displayProperty]=e,t[this.config.identifier]=e.toLowerCase(),t.newTag=!0,t)),this.resetInput()}},t.prototype.resetInput=function(){this.inputEl.nativeElement.value=""},t.prototype.emitInputBlurred=function(t){this.inputBlurred.emit(t)},l([e.Input()],t.prototype,"inputClass",void 0),l([e.Input()],t.prototype,"config",void 0),l([e.Input()],t.prototype,"disabled",void 0),l([e.Output()],t.prototype,"valueChanged",void 0),l([e.Output()],t.prototype,"inputFocused",void 0),l([e.Output()],t.prototype,"inputBlurred",void 0),l([e.Output()],t.prototype,"tagEntered",void 0),l([e.ViewChild("inputEl",{static:!0})],t.prototype,"inputEl",void 0),t=l([e.Component({selector:"ti-tag-input",template:'<div class="angular-tag-input" [ngClass]="inputClass + \'\'">\n  <form no-validate [formGroup]="tagInputForm">\n    <input\n      #inputEl\n      [disabled]="disabled"\n      (keyup.enter)="onEnterKeyPress()"\n      [placeholder]="config?.placeholder"\n      formControlName="tagInputVal"\n      (click)="emitInputFocused()"\n      (focus)="emitInputFocused()"\n      (blur)="emitInputBlurred($event)"\n      class="angular-tag-input__input"\n      autocomplete="off">\n  </form>\n</div>\n',styles:[".default .angular-tag-input__input{padding:6px 10px;border:none;width:98%;min-width:100px}.angular-tag-input input:focus{outline-width:0}"]})],t)}(),f="ArrowDown",y="ArrowUp",v="Enter",m="Escape",I=function(){function t(){}return t.prototype.transform=function(t,e,n){var i=this;return void 0===t&&(t=[]),void 0===n&&(n=""),n?g(t).map((function(t){return i.getFilteredItem(d({},t),e,n)})).filter((function(t){return!!t})):t},t.prototype.getFilteredItem=function(t,e,n){var i,o=this;if(void 0===n&&(n=""),""===n)return t;if(t[e.displayProperty].toLowerCase().includes(n.toLowerCase()))return t;if(t[e.nestedTagProperty]){var r=t[e.nestedTagProperty].map((function(t){return o.getFilteredItem(t,e,n)})).filter((function(t){return!!t}));if(r.length>0)return d({},t,((i={})[e.nestedTagProperty]=g(r),i))}return null},t=l([e.Pipe({name:"dropdownItemsFilter"})],t)}(),T=function(){function t(t){this.tagsInputService=t,this.listItems=[],this.inputVal="",this.itemAdded=new e.EventEmitter,this.itemClicked=new e.EventEmitter,this.dropdownItemsFilter=new I,this.identifierSeparator="__",this.itemsMap=new Map}return t.prototype.ngOnInit=function(){this.dropDownTemplate||(this.dropDownTemplate=this.defaultTagOptionTemplate),this.context={items:g(this.listItems),config:this.config,tagsLoading:this.tagsLoading,fns:{onItemClicked:this.onItemClicked.bind(this)}},this.keyboardEventsManager=new r.ListKeyManager(g(this.listItems)),this.populateItemsMap(this.listItems),this.ddIdPrefix=this.getRandomString(),this.tagsInputService.log(this.itemsMap,"items populated initially")},t.prototype.ngOnChanges=function(t){t.listItems&&!t.listItems.firstChange&&(this.filterItems(this.inputVal,t.listItems.currentValue),this.populateItemsMap(t.listItems?t.listItems.currentValue:this.listItems)),t.inputVal&&!t.inputVal.firstChange&&(this.filterItems(t.inputVal.currentValue),this.populateItemsMap(t.listItems?t.listItems.currentValue:this.listItems))},t.prototype.filterItems=function(t,e){void 0===t&&(t=this.inputVal),void 0===e&&(e=this.listItems),this.context.items=g(this.dropdownItemsFilter.transform(e,this.config,t)),this.ddIdPrefix=this.getRandomString()},t.prototype.getRandomString=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.prototype.populateItemsMap=function(t,e){var n=this;void 0===e&&(e=null),null===e?e="":e+=this.identifierSeparator,t.map((function(t,i){var o=e+i;t.tiIdentifier=o,n.itemsMap[o]=t,t[n.config.nestedTagProperty]&&t[n.config.nestedTagProperty].length&&n.populateItemsMap(t[n.config.nestedTagProperty],o)}))},t.prototype.onItemClicked=function(t,e){void 0===e&&(e=null),e&&e.stopImmediatePropagation(),this.itemClicked.emit(t)},t.prototype.handleKeyUp=function(t){if(t.stopImmediatePropagation(),this.keyboardEventsManager){var e=this.isKeyDown(t),n=this.isKeyUp(t),i=this.isKeyEnter(t);e||n?this.setActiveElement(t):i&&this.keyboardEventsManager.activeItem&&this.itemClicked.emit(this.keyboardEventsManager.activeItem)}},t.prototype.isKeyDown=function(t){return t.key===f||t.keyCode===a.DOWN_ARROW},t.prototype.isKeyUp=function(t){return t.key===y||t.keyCode===a.UP_ARROW},t.prototype.isKeyEnter=function(t){return t.key===v||t.keyCode===a.ENTER},t.prototype.setActiveElement=function(t){var e=this.isKeyDown(t),n=this.isKeyUp(t),i=d({},this.keyboardEventsManager.activeItem);e?this.setNextActiveElement(i,this.listItems):n&&this.setPreviousActiveElement(i,this.listItems)},t.prototype.setNextActiveElement=function(t,e){var n=this,i=t.tiIdentifier;if(!i)return e[0].tiKeyboardActive=!0,void this.keyboardEventsManager.setFirstItemActive();var o,r,a,s=i.split(this.identifierSeparator);o=s.length>1?g(s).splice(0,s.length-1).join(this.identifierSeparator):s[0],(r=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+o+n.identifierSeparator).test(t)}))).length||(r=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+o+"$").test(t)}))),(a=r.findIndex((function(t){return t===i})))===r.length-1?this.setActiveElementRecursively(this.findNextParent(s),this.listItems):this.setActiveElementRecursively(r[a+1],this.listItems)},t.prototype.findNextParent=function(t){var e,n;if(1===t.length){var i=""+(+t[0]+1);return this.itemsMap[i]?i:t[0]}var o=g(t).splice(0,t.length-1);return o[o.length-1]=""+(+o[o.length-1]+1),e=o.join(this.identifierSeparator),(n=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+e).test(t)}))).length?n[0]:this.findNextParent(g(t.splice(0,t.length-1)))},t.prototype.setPreviousActiveElement=function(t,e){var n=this,i=t.tiIdentifier;if(!i)return e[e.length-1].tiKeyboardActive=!0,void this.keyboardEventsManager.setActiveItem(e[e.length-1]);var o,r,a,s=i.split(this.identifierSeparator);o=s.length>1?g(s).splice(0,s.length-1).join(this.identifierSeparator):s[0],(r=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+o+"("+n.identifierSeparator+")?").test(t)}))).length||(r=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+o+"$").test(t)}))),a=r.findIndex((function(t){return t===i})),1===r.length||0===a?this.setActiveElementRecursively(this.findPrevousParentLastChild(s,i),this.listItems):this.setActiveElementRecursively(r[a-1],this.listItems)},t.prototype.findPrevousParentLastChild=function(t,e){var n,i=this,o=1===t.length,r=o?g(t):g(t).splice(0,t.length-1);r[r.length-1]=o?""+(+r[r.length-1]-1):r[r.length-1],n=r.join(this.identifierSeparator);var a=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+n+i.identifierSeparator).test(t)}));return a.length||(a=Object.keys(this.itemsMap).filter((function(t){return new RegExp("^"+n+"$").test(t)}))),a.length?-1!==a.indexOf(e)?n:a[a.length-1]:t.length>1?this.findPrevousParentLastChild(g(t.splice(0,t.length-1)),e):n=t.join(this.identifierSeparator)},t.prototype.setActiveElementRecursively=function(t,e){for(var n=0,i=e.length;n<i;++n)e[n].tiKeyboardActive=!1,e[n].tiIdentifier===t&&(this.keyboardEventsManager=new r.ListKeyManager(g(e)),e[n].tiKeyboardActive=!0,this.keyboardEventsManager.setActiveItem(e[n])),e[n][this.config.nestedTagProperty]&&e[n][this.config.nestedTagProperty].length&&this.setActiveElementRecursively(t,e[n][this.config.nestedTagProperty])},t.ctorParameters=function(){return[{type:c}]},l([e.Input()],t.prototype,"config",void 0),l([e.Input()],t.prototype,"listItems",void 0),l([e.Input()],t.prototype,"inputVal",void 0),l([e.Input()],t.prototype,"dropDownTemplate",void 0),l([e.Input()],t.prototype,"tagsLoading",void 0),l([e.Input()],t.prototype,"keyPress",void 0),l([e.Output()],t.prototype,"itemAdded",void 0),l([e.Output()],t.prototype,"itemClicked",void 0),l([e.ViewChild("defaultTagOptionTemplate",{static:!0})],t.prototype,"defaultTagOptionTemplate",void 0),t=l([e.Component({selector:"ti-dropdown",template:'\n<ng-container\n *ngTemplateOutlet="dropDownTemplate; context: context">\n</ng-container>\n\n\x3c!-- Default Tag Options Template --\x3e\n<ng-template #defaultTagOptionTemplate let-items="items" let-config="config">\n  <div class="angular-tags-dropdown">\n    <div class="angular-tags-dropdown__list">\n      <ng-container *ngFor="let item of items, let i = index">\n        <div\n          class="angular-tags-dropdown__list__item"\n          (click)="onItemClicked(item)"\n          tiKeyboardActiveClass="angular-tags-dropdown__list__item--active"\n          [isKeyboardActiveItem]="item.tiKeyboardActive"\n          >\n          {{item[config.displayProperty]}}\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</ng-template>\n',styles:[":host{display:block}:host .angular-tags-dropdown{padding:8px 10px}:host .angular-tags-dropdown__list__item{padding:8px 10px;cursor:pointer;transition:.5s}:host .angular-tags-dropdown__list__item:hover{background:#dcdcdc}:host .angular-tags-dropdown__list__item--active{background:#333;color:#fff}"]})],t)}(),w=function(){function t(t,n){this.sso=t,this.tagsService=n,this.tagsData=[],this.disabled=!1,this.dropDownTemplate=null,this.tagItemTemplate=null,this.required=!1,this.tagRemoved=new e.EventEmitter,this.tagAdded=new e.EventEmitter,this.valueChanged=new e.EventEmitter,this.itemClicked=new e.EventEmitter,this.tags=[],this.defaultConfig={defaultClass:"angular-tags-input",additionalClasses:"",displayProperty:"value",identifier:"id",onlyFromAutoComplete:!1,placeholder:"Search",hideAddedTags:!0,nestedTagProperty:"",showTagsSelectedInDD:!1,hideTags:!1,maxItems:null,nestedTagParentProp:"",keyboardActiveClass:"angular-tags-dropdown__list__item--active"},this.dropdownOverlayPosition=[{offsetY:12,originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{offsetY:-28,originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{offsetY:28,originX:"end",originY:"bottom",overlayX:"end",overlayY:"bottom"},{offsetY:-28,originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],this.unAddedTagsPipe=new u}return t.prototype.keyEvent=function(t){this.inputKeyPress(t)},t.prototype.ngOnChanges=function(t){if(t.tagsData&&this.isInputFocused&&(t.tagsData.previousValue||(t.tagsData.previousValue=[]),t.tagsData&&t.tagsData.currentValue!==t.tagsData.previousValue&&!t.tagsData.firstChange)){if(t.tagsData.currentValue.length!==t.tagsData.previousValue.length&&this.dropdownShownYet)return this.showDropdown(t.tagsData.currentValue);if(0===t.tagsData.previousValue.length)return;for(var e=0,n=t.tagsData.currentValue.length;e<n;++e)if(t.tagsData.currentValue[e][this.config.identifier]!==t.tagsData.previousValue[e][this.config.identifier])return this.showDropdown(t.tagsData.currentValue)}},t.prototype.onFocusChange=function(t){var e=this;this.isInputFocused=t,!t&&this.config.hideDDOnBlur&&setTimeout((function(){e.hideDropdown()}),400)},t.prototype.onInputValueChanged=function(t){this.inputVal=t,this.valueChanged.emit(t)},t.prototype.ngOnInit=function(){this.config=d({},this.defaultConfig,this.config),this.ddScrollStrategy=this.sso.reposition()},t.prototype.writeValue=function(t){var e=this;t=t||[],t=Array.isArray(t)?t:[t],this.tags=t.map((function(t){var n;return d({},t,((n={})[e.config.identifier]=t[e.config.identifier],n[e.config.displayProperty]=t[e.config.displayProperty],n))})),this.config.showTagsSelectedInDD&&setTimeout((function(){e.tags.map((function(t){e.selectRelatedTags(t)}))}))},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.validate=function(t){return!1===this.required?null:t.value&&t.value.length?null:{required:!0}},t.prototype.onInputFocus=function(){this.config.clearInputOnFocus&&(""!==this.tagInput.lastValueEmitted&&this.tagInput.tagInputForm.get("tagInputVal").setValue(""),this.tagInput.resetInput()),this.config.clearTagsOnFocus&&(this.tags.length=0),this.showDropdown(),this.onFocusChange(!0)},t.prototype.showDropdown=function(t){void 0===t&&(t=null),this.unAddedTagsPipe.transform(t||this.tagsData,{tagsAdded:this.tags,config:this.config}).length&&(this.isDropdownOpen=!0),this.dropdownShownYet||(this.dropdownShownYet=!0)},t.prototype.hideDropdown=function(){this.isDropdownOpen=!1,this.tagsData=this.removeKeyboardSelection(this.tagsData)},t.prototype.removeKeyboardSelection=function(t){var e=this;return t.map((function(t){return t[e.config.nestedTagProperty]&&t[e.config.nestedTagProperty].length&&(t[e.config.nestedTagProperty]=e.removeKeyboardSelection(t[e.config.nestedTagProperty])),d({},t,{tiKeyboardActive:!1})}))},t.prototype.ngAfterViewInit=function(){if(!this.config&&this.onChange||console.warn("Please use ngModel or FormControlName with <ti-angular-tags-input>"),this.config.nestedTagProperty&&!this.config.nestedTagParentProp)throw new Error("nestedTagProperty provided but nestedTagParentProp not provided.\nThis will cause the parent tag to not remove if any of the children is removed")},t.prototype.addTag=function(t){var e=this;this.config.showTagsSelectedInDD&&(t.tiSelected=!0),this.config.maxItems>0&&this.tags.length===this.config.maxItems||this.tags.find((function(n){return n[e.config.identifier]===t[e.config.identifier]}))||(this.tags=g(this.tags,[t]),this.onChange(this.tags))},t.prototype.removeTag=function(t){var e=this;this.tags=this.tags.filter((function(n){return n[e.config.identifier]!==t[e.config.identifier]})),0===this.tags.length&&(this.tagInput.resetInput(),this.valueChanged.emit("")),this.onChange(this.tags)},t.prototype.onItemClicked=function(t){var e=this;this.config.toggleSelectionOnClick&&(t.tiSelected||this.tags.find((function(n){return n[e.config.identifier]===t[e.config.identifier]})))?(this.removeTag(t),this.removeTagSelection(t),this.tagRemoved.emit(t)):(this.addTag(t),this.selectRelatedTags(t),this.tagAdded.emit(this.tagsService.getMainTagAfterAdding(this.tagsData,t,this.tags,this.config))),this.tagInput.resetInput(),this.itemClicked.emit(t),this.hideDropdown()},t.prototype.removeTagSelection=function(t,e,n){var i=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),t.tiSelected=!1,!e&&t[this.config.nestedTagProperty])for(var o=0,r=t[this.config.nestedTagProperty].length;o<r;++o)this.removeTag(t[this.config.nestedTagProperty][o]),this.removeTagSelection(t[this.config.nestedTagProperty][o],e);if(t[this.config.nestedTagParentProp]&&!n){var a=this.tagsService.findTagById(this.tagsData,t[this.config.nestedTagParentProp],this.config);a&&a.tiSelected&&(this.removeTag(a),this.removeTagSelection(a,!0,n),a[this.config.nestedTagProperty].map((function(e){e[i.config.identifier]!=t[i.config.identifier]&&(i.addTag(e),i.selectRelatedTags(e,!1,!0))})))}this.onChange(this.tags)},t.prototype.tagCloseClicked=function(t){this.tagRemoved.emit(t),this.removeTag(t),this.removeTagSelection(t)},t.prototype.selectRelatedTags=function(t,e,n){var i=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.config.showTagsSelectedInDD&&(t.tiSelected=!0),t[this.config.nestedTagProperty]&&!e)for(var o=0,r=t[this.config.nestedTagProperty].length;o<r;++o)this.config.showParentTagsOnly?(this.removeTag(t[this.config.nestedTagProperty][o]),this.selectRelatedTags(t[this.config.nestedTagProperty][o],!1,!0)):this.addTag(t[this.config.nestedTagProperty][o]);if(t[this.config.nestedTagParentProp]&&!n){var a=this.tagsService.findTagById(this.tagsData,t[this.config.nestedTagParentProp],this.config);if(!a)return;var s=a[this.config.nestedTagProperty].length,d=this.tags.filter((function(t){return t[i.config.nestedTagParentProp]==a[i.config.identifier]})).length;s>0&&d>0&&(this.config.childrenCountProperty?d===a[this.config.childrenCountProperty]:d===s)&&(this.addTag(a),this.selectRelatedTags(a,!1,!1))}this.onChange(this.tags)},t.prototype.registerOnTouched=function(t){},t.prototype.inputKeyPress=function(t){var e=this;if(t.stopImmediatePropagation(),this.isDropdownOpen||t.key!==y&&t.key!==f){if(this.isDropdownOpen&&t.key===m)return this.hideDropdown()}else this.isDropdownOpen=!0;setTimeout((function(){e.dropdown&&e.dropdown.handleKeyUp(t)}),10)},t.ctorParameters=function(){return[{type:n.ScrollStrategyOptions},{type:c}]},l([e.ViewChild(T,{static:!1})],t.prototype,"dropdown",void 0),l([e.Input()],t.prototype,"config",void 0),l([e.Input()],t.prototype,"tagsData",void 0),l([e.Input()],t.prototype,"disabled",void 0),l([e.Input()],t.prototype,"tagsLoading",void 0),l([e.Input()],t.prototype,"dropDownTemplate",void 0),l([e.Input()],t.prototype,"tagItemTemplate",void 0),l([e.Input()],t.prototype,"required",void 0),l([e.Output()],t.prototype,"tagRemoved",void 0),l([e.Output()],t.prototype,"tagAdded",void 0),l([e.Output()],t.prototype,"valueChanged",void 0),l([e.Output()],t.prototype,"itemClicked",void 0),l([e.ViewChild(h,{static:!0})],t.prototype,"tagInput",void 0),l([e.HostListener("keyup",["$event"])],t.prototype,"keyEvent",null),t=l([e.Component({selector:"ti-angular-tags-input",template:'<div\n  class="angular-tags-input"\n  [ngClass]="config.defaultClass + \' \' + config.additionalClasses">\n  <div class="angular-tags-input__inp-container" #dropdownTrigger="cdkOverlayOrigin" cdkOverlayOrigin>\n    <ng-container *ngIf="!config.hideTags">\n      <ti-tag\n        class="angular-tags-input__inp-container__tag"\n        *ngFor="let tagItem of tags"\n        [config]="config"\n        [tagItem]="tagItem"\n        [tagItemTemplate]="tagItemTemplate"\n        (closeClicked)="tagCloseClicked($event)">\n      </ti-tag>\n    </ng-container>\n    <ti-tag-input\n      [style.display]="config.hideInputOnSelection && tags.length ? \'none\' : \'block\'"\n      [config]="config"\n      [disabled]="disabled"\n      class="angular-tags-input__inp-container__tag-input"\n      (tagEntered)="addTag($event)"\n      (valueChanged)="onInputValueChanged($event)"\n      (inputFocused)="onInputFocus()"\n      (inputBlurred)="onFocusChange(false);"\n      (inputKeyPress)="inputKeyPress($event)">\n    </ti-tag-input>\n  </div>\n  \n  <ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="dropdownTrigger" [cdkConnectedOverlayOpen]="isDropdownOpen"\n    [cdkConnectedOverlayHasBackdrop]="config.ddHasBackdrop" (backdropClick)="hideDropdown()"\n    [cdkConnectedOverlayPanelClass]="\'angular-tags-input-dd-overlay\' + config.dropdownClass ? config.dropdownClass : \'\'"\n    [cdkConnectedOverlayScrollStrategy]="ddScrollStrategy"\n    [cdkConnectedOverlayPositions]="dropdownOverlayPosition"\n    [cdkConnectedOverlayMinWidth]="310">\n    <div class="angular-tags-input__dd-container">\n      <ti-dropdown\n        [inputVal]="inputVal"\n        (itemClicked)="onItemClicked($event);"\n        [dropDownTemplate]="dropDownTemplate"\n        [listItems]="tagsData | unAddedTags: {tagsAdded: tags, config: config}"\n        [config]="config"\n        (itemAdded)="addTag($event);">\n      </ti-dropdown>\n    </div>\n  </ng-template>\n</div>\n',providers:[C(),b()],encapsulation:e.ViewEncapsulation.None,styles:["ti-angular-tags-input{display:block;width:100%}.angular-tags-input{display:flex;flex-direction:row;align-items:center;margin:-3px 0}.angular-tags-input__inp-container{width:100%;display:flex;flex-direction:row;align-items:center;background:#fff;flex-wrap:wrap;padding:9px 18px 18px;position:relative;top:4px}.angular-tags-input__inp-container__tag-input{flex:1}.angular-tags-input__inp-container__tag{margin:0 10px 8px 0}.angular-tags-input__dd-container{display:block;width:100%}.cdk-overlay-container.select-assignee-overlay{z-index:1050}.cdk-overlay-container.task-menu-popover-overlay{z-index:2050}.duplicate-modal-overlay{z-index:999}.cdk-overlay-backdrop{display:block}.cdk-global-overlay-wrapper,.cdk-overlay-container{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{display:block;position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;background-color:#fff;z-index:1000;display:flex;max-width:100%;max-height:100%;border:1px solid #fff;box-shadow:0 2px 14px 4px rgba(0,0,0,.1)}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}"]})],t)}();function C(){return{provide:i.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return w})),multi:!0}}function b(){return{provide:i.NG_VALIDATORS,useExisting:e.forwardRef((function(){return w})),multi:!0}}var P=function(){function t(){this.tagClass="default-tag",this.closeClicked=new e.EventEmitter}return t.prototype.ngOnInit=function(){this.tagItemTemplate||(this.tagItemTemplate=this.defaultTagItemTemplate),this.context={item:this.tagItem,config:this.config,tagClass:this.tagClass,closeClicked:this.closeClicked}},l([e.Input()],t.prototype,"config",void 0),l([e.Input()],t.prototype,"tagItem",void 0),l([e.Input()],t.prototype,"tagClass",void 0),l([e.Input()],t.prototype,"tagItemTemplate",void 0),l([e.Output()],t.prototype,"closeClicked",void 0),l([e.ViewChild("defaultTagItemTemplate",{static:!0})],t.prototype,"defaultTagItemTemplate",void 0),t=l([e.Component({selector:"ti-tag",template:'\n<ng-container\n *ngTemplateOutlet="tagItemTemplate; context: context;">\n</ng-container>\n\n\x3c!-- Default Tag Options Template --\x3e\n<ng-template #defaultTagItemTemplate let-item="item" let-tagClass="tagClass" let-config="config" let-closeClicked="closeClicked">\n  <div class="angular-tag" [ngClass]="tagClass + \'\'">\n    <div class="angular-tag__text" *ngIf="config">\n      {{item[config.displayProperty]}}\n    </div>\n    <button type="button" class="angular-tag__close-btn" (click)="closeClicked.emit(item)">\n      x\n    </button>\n  </div>\n</ng-template>\n\n\n',styles:[".angular-tag{display:flex;align-items:center}.angular-tag__text{margin-right:10px;flex:1}.default-tag .angular-tag__text{color:#fff}.angular-tag__close-btn{cursor:pointer}.default-tag .angular-tag__close-btn{padding-left:0;padding-right:0;background:0 0;border:none;color:#fff}.default-tag .angular-tag__close-btn:hover{color:#dcdcdc}.angular-tag.default-tag{background:#344860;padding:6px 10px;transition:.5s}.angular-tag.default-tag:hover{background:#333}"]})],t)}(),k=function(){function t(t,e){this.el=t,this.cdRef=e,this.isKeyboardActiveItem=!1}return t.prototype.ngOnInit=function(){this.tiKeyboardActiveClass||console.warn("tiKeyboardActiveClass needs a class to apply. But no class was passed.")},t.prototype.ngOnChanges=function(t){t.isKeyboardActiveItem&&t.isKeyboardActiveItem.currentValue!==t.isKeyboardActiveItem.previousValue&&this.evaluateClassApplication()},t.prototype.evaluateClassApplication=function(){this.isKeyboardActiveItem?(this.el.nativeElement.classList.add(this.tiKeyboardActiveClass),this.el.nativeElement.scrollIntoView(!1)):this.el.nativeElement.classList.remove(this.tiKeyboardActiveClass),this.cdRef.markForCheck()},t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ChangeDetectorRef}]},l([e.Input()],t.prototype,"isKeyboardActiveItem",void 0),l([e.Input()],t.prototype,"tiKeyboardActiveClass",void 0),t=l([e.Directive({selector:"[tiKeyboardActiveClass]"})],t)}(),x=function(){function t(){}return t=l([e.NgModule({declarations:[w,P,h,T,u,I,k],imports:[s.CommonModule,i.FormsModule,i.ReactiveFormsModule,n.OverlayModule],exports:[w,k]})],t)}();t.AngularTagsInputComponent=w,t.AngularTagsInputModule=x,t.AngularTagsInputService=c,t.KeyboardActiveClassDirective=k,t.UnAddedTagsPipe=u,t.getAngularTagsInputValidatorsProvider=b,t.getAngularTagsInputValueAccessor=C,t.ɵa=T,t.ɵb=h,t.ɵc=P,t.ɵd=I,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=iomechs-angular-tags-input.umd.min.js.map