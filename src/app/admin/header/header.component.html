<!-- Header -->

<div class="header">
  <div class="header-left">
    <a class="logo logo-small">
      <img src="assets/img/logo-icon.png" alt="Logo" width="30" height="30" />
    </a>
  </div>
  <a href="javascript:void(0);" id="toggle_btn">
    <i class="fas fa-align-left"></i>
  </a>
  <a class="mobile_btn" id="mobile_btn" href="javascript:void(0);">
    <i class="fas fa-align-left"></i>
  </a>

  <ul class="nav user-menu">
    <!-- Notifications -->
    <li class="nav-item dropdown noti-dropdown">
      <a
        href="javascript:void(0)"
        class="dropdown-toggle nav-link"
        (click)="bell();this.toggle=false"
        [attr.aria-expanded]="!bellCollapsed"
        aria-controls="collapseExample1"
      >
        <i class="far fa-bell"></i>
        
         <span *ngIf="toggle"class="badge badge-pill" ></span>
      </a>
      <div
        class="dropdown-menu dropdown-menu-right notifications"
        id="collapseExample1"
        [ngbCollapse]="bellCollapsed"
      >
        <div class="topnav-dropdown-header">
          <span class="notification-title">Notifications</span>
          <!-- <a
            href="javascript:void(0)"
            class="clear-noti"
            (click)="bellCollapsed = !bellCollapsed"
          >
            Clear All
          </a> -->
        </div>
        <div class="noti-content">
          <ul class="notification-list">
            <li *ngFor="let notification of notifications"
              class="notification-message"
              (click)="bellCollapsed = !bellCollapsed"
            >
              <a [routerLink]="'/admin/all-notifications'">
                <div class="media">
                  <span class="avatar avatar-sm">
                    <img
                      class="avatar-img rounded-circle"
                      alt=""
                      src="assets/img/provider/provider-01.jpg"
                    />
                  </span>
                  <div class="media-body">
                    <p class="noti-details">
                      <span class="noti-title" *ngIf="notification.notificationEmployee.length !== 0">{{notification.notificationEmployee[0].name}}</span>
                      <span  class="noti-title" *ngIf="notification.notificationAccountant.length !== 0">{{notification.notificationAccountant[0].name}}</span>
      
                      <span class="noti-title"
                        > {{notification.message}} on Product {{notification.productDetails[0].serialNumber}}</span
                      >
                    </p>
                    <p class="noti-time">
                      <span class="notification-time" style="color: #ff0080"
                        >{{notification.currentDate | date:'medium'}}</span
                      >
                    </p>
                  </div>
                </div>
              </a>
            </li>
          
          </ul>
        </div>
        <div class="topnav-dropdown-footer">
          <a
            [routerLink]="'/admin/all-notifications'"
            (click)="bellCollapsed = !bellCollapsed"
            >View all Notifications</a
          >
        </div>
      </div>
    </li>
    <!-- /Notifications -->

    <!-- User Menu -->
    <li class="nav-item dropdown">
      <a
        href="javascript:void(0)"
        class="dropdown-toggle user-link nav-link"
        class="dropdown-toggle nav-link"
        (click)="user()"
        [attr.aria-expanded]="!userCollapsed"
        aria-controls="collapseExample2"
      >
        <span class="user-img">
          <img
            class="rounded-circle"
            [src]="(userr?.img||userr?.image)?(userr?.img||userr?.image):'assets/img/user.jpg'"
            width="40"
            alt="Admin"
          />
        </span>
      </a>
      <div
        class="dropdown-menu dropdown-menu-right"
        id="collapseExample2"
        [ngbCollapse]="userCollapsed"
      >
        <a class="dropdown-item" href="javascript:void(0);" [routerLink]="'/admin/profile'">Profile</a>
        <a class="dropdown-item" href="javascript:void(0);" (click)="logout()">Logout</a>
      </div>
    </li>
    <!-- /User Menu -->
  </ul>
</div>
<!-- /Header -->
<div class="toast  "  style="position:fixed;bottom:20px;left:25px;z-index: 57587587575;" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header" style="border-color: #ff0080;">
      <strong class="mr-auto" style="color: #ff0080;">New Notification</strong>
      <small style="color: #ff0080;">{{lastNotification?.currentDate| date:'medium'}}</small>
      <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="toast-body">
      <span  *ngIf="lastNotification?.notificationEmployee.length !== 0">{{lastNotification?.notificationEmployee[0].name}}</span>
     <span   *ngIf="lastNotification?.notificationAccountant.length !== 0">{{lastNotification?.notificationAccountant[0].name}}</span>
      
     {{lastNotification?.message}} on Product {{lastNotification?.productDetails[0].serialNumber}}
    </div>
  </div>